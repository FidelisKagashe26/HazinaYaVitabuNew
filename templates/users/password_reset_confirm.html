{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password</title>
    <link rel="stylesheet" href="{% static 'css/tailwind.min.css' %}">
    <script>
        // JavaScript to auto-move between input fields
        function moveToNext(current, next) {
            if (current.value.length === current.maxLength) {
                next.focus(); // Move focus to the next input
            }
        }

        function moveToPrevious(current, prev, event) {
            // Only move back if backspace key is pressed
            if (event.key === 'Backspace' && current.value.length === 0) {
                prev.focus(); // Move focus to the previous input
            }
        }
    </script>
</head>
<body class="bg-gradient-to-l from-yellow-50 to-yellow-200 flex items-center justify-center min-h-screen">
    <div class="bg-white p-8 rounded-lg m-3 shadow-lg w-full max-w-md">
        <h2 class="text-2xl font-extrabold mb-6 text-center text-yellow-500">Reset Your Password</h2>

        <div class="mt-4 border-t-2 border-yellow-400"></div>

        {% if error_message %}
            <div class="mb-4 p-4 rounded bg-red-100 text-red-800 text-center" role="alert">
                {{ error_message }}
            </div>
        {% endif %}

        <form method="post" class="space-y-4">
            {% csrf_token %}
            <div>
                <label for="reset_code" class="block text-sm font-medium text-gray-700">Enter the 6-digit code:</label>
                <div class="flex justify-between space-x-2">
                    <!-- 6 Separate Inputs for 6 Digits -->
                    <input 
                        type="text" 
                        name="reset_code_1" 
                        id="reset_code_1" 
                        maxlength="1" 
                        class="w-1/6 p-2 border border-gray-300 rounded focus:outline-none focus:border-yellow-500 text-center"
                        oninput="moveToNext(this, document.getElementById('reset_code_2'))"
                        onkeydown="moveToPrevious(this, document.getElementById('reset_code_1'), event)"
                        inputmode="numeric"
                        autocomplete="off"
                        required
                    >
                    <input 
                        type="text" 
                        name="reset_code_2" 
                        id="reset_code_2" 
                        maxlength="1" 
                        class="w-1/6 p-2 border border-gray-300 rounded focus:outline-none focus:border-yellow-500 text-center"
                        oninput="moveToNext(this, document.getElementById('reset_code_3'))"
                        onkeydown="moveToPrevious(this, document.getElementById('reset_code_1'), event)"
                        inputmode="numeric"
                        autocomplete="off"
                        required
                    >
                    <input 
                        type="text" 
                        name="reset_code_3" 
                        id="reset_code_3" 
                        maxlength="1" 
                        class="w-1/6 p-2 border border-gray-300 rounded focus:outline-none focus:border-yellow-500 text-center"
                        oninput="moveToNext(this, document.getElementById('reset_code_4'))"
                        onkeydown="moveToPrevious(this, document.getElementById('reset_code_2'), event)"
                        inputmode="numeric"
                        autocomplete="off"
                        required
                    >
                    <input 
                        type="text" 
                        name="reset_code_4" 
                        id="reset_code_4" 
                        maxlength="1" 
                        class="w-1/6 p-2 border border-gray-300 rounded focus:outline-none focus:border-yellow-500 text-center"
                        oninput="moveToNext(this, document.getElementById('reset_code_5'))"
                        onkeydown="moveToPrevious(this, document.getElementById('reset_code_3'), event)"
                        inputmode="numeric"
                        autocomplete="off"
                        required
                    >
                    <input 
                        type="text" 
                        name="reset_code_5" 
                        id="reset_code_5" 
                        maxlength="1" 
                        class="w-1/6 p-2 border border-gray-300 rounded focus:outline-none focus:border-yellow-500 text-center"
                        oninput="moveToNext(this, document.getElementById('reset_code_6'))"
                        onkeydown="moveToPrevious(this, document.getElementById('reset_code_4'), event)"
                        inputmode="numeric"
                        autocomplete="off"
                        required
                    >
                    <input 
                        type="text" 
                        name="reset_code_6" 
                        id="reset_code_6" 
                        maxlength="1" 
                        class="w-1/6 p-2 border border-gray-300 rounded focus:outline-none focus:border-yellow-500 text-center"
                        onkeydown="moveToPrevious(this, document.getElementById('reset_code_5'), event)"
                        inputmode="numeric"
                        autocomplete="off"
                        required
                    >
                </div>
            </div>
            <button 
                type="submit" 
                class="w-full bg-yellow-600 text-white py-2 rounded hover:bg-yellow-500 transition duration-200"
            >
                Verify Code
            </button>

            <div class="mt-4 text-center">
                <a href="{% url 'login' %}" class="inline-block text-yellow-500 hover:text-yellow-400 font-semibold text-lg">
                    Go to Login</span>
                </a>
            </div> 

        </form>
    </div>
</body>
</html>
